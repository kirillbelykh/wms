{% macro form_fields(obj=None, cells=[], quantity=0) %}
<div class="flex flex-col justify-center mt-10 space-y-4 w-full max-w-lg mx-auto">

  <!-- Форма создания/редактирования -->
  <form method="post" class="bg-white p-8 rounded-2xl shadow-lg w-full space-y-5">

    <h2 class="text-xl font-semibold text-center mb-4">
      {{ 'Редактирование' if obj else 'Создание' }} расходника
    </h2>

    <!-- Название -->
    <div>
      <input 
        name="name" 
        placeholder="Название" 
        class="border rounded-lg w-full p-2 focus:ring-2 focus:ring-blue-400 focus:outline-none" 
        value="{{ obj.name if obj else '' }}" required
      >
    </div>

    <!-- Ячейка -->
    <div>
      <select name="cell_id" class="border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-400 focus:outline-none" required>
        <option value="">Выберите ячейку</option>
        {% for c in cells %}
          <option value="{{ c.id }}" {% if obj and obj.cell_id == c.id %}selected{% endif %}>{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Количество -->
    <div>
      <input 
        type="number" 
        name="quantity" 
        placeholder="Количество" 
        class="border rounded-lg w-full p-2 focus:ring-2 focus:ring-blue-400 focus:outline-none"
        value="{{ obj.quantity if obj else quantity }}" step="0.01" required
      >
    </div>

    <!-- Кнопки сохранения и отмены -->
    <div class="flex justify-between gap-3 mt-4">
        <button type="submit" class="bg-green-600 text-white px-5 py-2 rounded-lg hover:bg-green-700 transition">
            Сохранить
        </button>

        <a href="/catalogs/consumables/" class="bg-gray-300 px-5 py-2 rounded-lg hover:bg-gray-400 transition">
            Отмена
        </a>
    </div>
  </form>

  <!-- Кнопка удаления -->
  {% if obj %}
  <form method="post" action="/catalogs/consumables/{{ obj.id }}/delete" onsubmit="return confirm('Удалить расходник?');" class="flex justify-end mt-2">
      <button type="submit" class="bg-red-600 text-white px-5 py-2 rounded-lg hover:bg-red-700 transition">
          Удалить
      </button>
  </form>
  {% endif %}

</div>
{% endmacro %}